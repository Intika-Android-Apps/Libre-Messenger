From df7534356c7c11060241f8cad3baf5b3b7d2c4c7 Mon Sep 17 00:00:00 2001
From: intika <intika@librefox.org>
Date: Wed, 29 Jan 2020 11:22:54 +0100
Subject: [PATCH] Add account creation with certificate to initial setup

---
 src/main/java/de/pixart/messenger/ui/EditAccountActivity.java | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/main/java/de/pixart/messenger/ui/EditAccountActivity.java b/src/main/java/de/pixart/messenger/ui/EditAccountActivity.java
index 26ebf5d4b..5de41d49d 100644
--- a/src/main/java/de/pixart/messenger/ui/EditAccountActivity.java
+++ b/src/main/java/de/pixart/messenger/ui/EditAccountActivity.java
@@ -716,6 +716,7 @@ public boolean onCreateOptionsMenu(final Menu menu) {
         final MenuItem shareQRCode = menu.findItem(R.id.action_show_qr_code);
         final MenuItem announcePGP = menu.findItem(R.id.mgmt_account_announce_pgp);
         final MenuItem forgotPassword = menu.findItem(R.id.mgmt_account_password_forgotten);
+        final MenuItem addAccountWithCert = menu.findItem(R.id.action_add_account_with_cert);
         renewCertificate.setVisible(mAccount != null && mAccount.getPrivateKeyAlias() != null);
 
         if (mAccount != null && mAccount.isOnlineAndConnected()) {
@@ -747,6 +748,7 @@ public boolean onCreateOptionsMenu(final Menu menu) {
                     && !mAccount.isOptionSet(Account.OPTION_REGISTER));
         } else {
             showPassword.setVisible(false);
+            addAccountWithCert.setVisible(true);
         }
         return super.onCreateOptionsMenu(menu);
     }
